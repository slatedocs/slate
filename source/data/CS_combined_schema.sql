--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'UTF8';

SET search_path = public, pg_catalog;

CREATE TABLE attendees (
    id integer NOT NULL,
    event_id integer,
    member_id integer,
    email character varying(255) NOT NULL,
    first_name character varying(255),
    last_name character varying(255),
    phone_number character varying(255),
    postcode character varying(255),
    created_at timestamp without time zone,
    country character varying(3),
    external_constituent_id character varying(255),
    new_member boolean,
    user_ip character varying(39),
    attending_status character varying(50),
    generated_local_chapter_member_id integer,
    cached_organisation_slug character varying(255),
    additional_fields text,
    external_action_id character varying(255),
    external_id character varying(255),
    join_organisation boolean,
    join_group boolean,
    join_list_suppressed boolean
);


CREATE TABLE blast_emails (
    id integer NOT NULL,
    petition_id integer,
    from_name character varying(255) NOT NULL,
    from_address character varying(255) NOT NULL,
    subject character varying(255) NOT NULL,
    body text NOT NULL,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    recipient_count integer,
    admin_status character varying(255) DEFAULT 'pending'::character varying,
    delivery_status character varying(255) DEFAULT 'pending'::character varying,
    administered_at timestamp without time zone,
    admin_reason text,
    type character varying(255),
    group_id integer,
    organisation_id integer,
    target_recipients character varying(255),
    reviewer_user_id integer,
    event_id integer
);

CREATE TABLE comments (
    id integer NOT NULL,
    text text,
    up_count integer DEFAULT 0,
    approved boolean,
    flagged_at timestamp without time zone,
    flagged_by_id integer,
    signature_id integer,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    featured boolean DEFAULT false,
    user_agent text,
    user_ip character varying(255),
    flag_reason character varying(255)
);

CREATE TABLE events (
    id integer NOT NULL,
    title character varying(255),
    description text,
    slug character varying(255),
    start timestamp without time zone,
    "end" timestamp without time zone,
    location_id integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    user_id integer,
    organisation_id integer,
    calendar_id integer,
    admin_status character varying(255) DEFAULT 'unreviewed'::character varying,
    admin_reason text,
    administered_at timestamp without time zone,
    external_id character varying(255),
    image_file_name character varying(255),
    image_content_type character varying(255),
    image_file_size integer,
    image_updated_at timestamp without time zone,
    max_attendees_count integer,
    locale character varying(5) DEFAULT 'en'::character varying,
    target_id integer,
    thank_attendee_email_content text,
    approaching_event_attendee_email_content text,
    bsd_constituent_groups_id text,
    notify_changes_to_attendees boolean DEFAULT true,
    sharing_disabled boolean DEFAULT false,
    host_address character varying(255),
    cancel_reason text,
    cancelled_at timestamp without time zone,
    deleted_at timestamp without time zone,
    type character varying(255),
    local_chapter_id integer,
    launched_at timestamp without time zone,
    hidden_address boolean DEFAULT false,
    promoted_from_waitlist_email_content text,
    petition_id integer,
    extra_location_info text,
    external_action_id character varying(255),
    user_ip character varying(255),
    user_agent text,
    request_referer text,
    group_id integer
);

CREATE TABLE local_chapter_members (
    id integer NOT NULL,
    local_chapter_id integer,
    member_id integer,
    introduction text,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    email character varying(255) NOT NULL,
    first_name character varying(255),
    last_name character varying(255),
    phone_number character varying(255),
    postcode character varying(255),
    country character varying(255),
    locale character varying(5) DEFAULT 'en'::character varying,
    notification_level character varying(20),
    type character varying(255) NOT NULL,
    local_chapter_organiser_request_id integer,
    user_id integer,
    deleted_at timestamp without time zone
);

CREATE TABLE local_chapters (
    id integer NOT NULL,
    name character varying(255),
    slug character varying(255),
    organisation_id integer,
    geography_id integer,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    description text,
    local_chapter_collection_id integer,
    creation_survey_responses text,
    location_id integer,
    welcome_email_content text,
    last_activity_notification_sent_at timestamp without time zone
);

CREATE TABLE locations (
    id integer NOT NULL,
    query character varying(255),
    latitude numeric(13,10),
    longitude numeric(13,10),
    street character varying(255),
    locality character varying(255),
    postal_code character varying(255),
    country character varying(255),
    region character varying(255),
    warning character varying(255),
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    extras text,
    point geometry(Point,4326),
    street_number character varying(200),
    venue character varying(255)
);

CREATE TABLE members (
    id integer NOT NULL,
    email character varying(255),
    organisation_id integer,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    external_id character varying(255),
    forum_premoderation_required boolean
);

CREATE TABLE petitions (
    id integer NOT NULL,
    title character varying(255),
    who character varying(255),
    why text,
    what text,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    user_id integer,
    slug character varying(255),
    organisation_id integer NOT NULL,
    image_file_name character varying(255),
    image_content_type character varying(255),
    image_file_size integer,
    image_updated_at timestamp without time zone,
    delivery_details text,
    hidden boolean DEFAULT false NOT NULL,
    admin_status character varying(255) DEFAULT 'unreviewed'::character varying,
    launched boolean DEFAULT false NOT NULL,
    campaigner_contactable boolean DEFAULT true,
    admin_reason text,
    administered_at timestamp without time zone,
    effort_id integer,
    admin_notes text,
    source character varying(255),
    group_id integer,
    location_id integer,
    petition_letter_file_name character varying(255),
    petition_letter_content_type character varying(255),
    petition_letter_file_size integer,
    petition_letter_updated_at timestamp without time zone,
    alias character varying(255),
    bsd_constituent_group_id character varying(255),
    target_id integer,
    external_id character varying(255),
    redirect_to text,
    external_facebook_page character varying(255),
    external_site character varying(255),
    show_progress_bar boolean DEFAULT true,
    comments_updated_at timestamp without time zone,
    successful boolean DEFAULT false,
    ended_story text,
    after_signature_redirect_url text,
    locale character varying(255) DEFAULT 'en'::character varying,
    settings text,
    change_org_url text,
    signature_count_add_amount integer,
    locked_fields text,
    user_ip character varying(255),
    user_agent text,
    request_referer text,
    spam_status character varying(255),
    ended_type character varying(255),
    ended_reason character varying(255),
    daisy_chain character varying(255),
    new_member_daisy_chain character varying(255),
    external_action_id character varying(255),
    custom_goal integer,
    events_enabled_email_sent_at timestamp without time zone,
    local_chapter_id integer,
    achievements_store text,
    image_description character varying(255),
    bsd_signup_form_id character varying(255)
);


CREATE TABLE signatures (
    id integer NOT NULL,
    petition_id integer,
    email character varying(255) NOT NULL,
    first_name character varying(255),
    last_name character varying(255),
    phone_number character varying(255),
    postcode character varying(255),
    created_at timestamp without time zone,
    join_organisation boolean,
    deleted_at timestamp without time zone,
    unsubscribe_at timestamp without time zone,
    external_constituent_id character varying(255),
    member_id integer,
    additional_fields text,
    cached_organisation_slug character varying(255),
    source character varying(255) DEFAULT ''::character varying,
    join_group boolean,
    external_id character varying(255),
    new_member boolean,
    external_action_id character varying(255),
    locale character varying(5) DEFAULT 'en'::character varying,
    obfuscated_bsd_cons_id character varying(255),
    bucket character varying(255),
    country character varying(255),
    updated_at timestamp without time zone,
    user_ip character varying(39),
    join_list_suppressed boolean,
    daisy_chain_used character varying(50),
    bsd_ab_test_cons_group_id character varying(255),
    from_embed boolean,
    user_agent character varying(255),
    confirmed_at timestamp without time zone,
    confirmation_sent_at timestamp without time zone,
    last_signed_at timestamp without time zone
);

CREATE TABLE unsubscribes (
    id integer NOT NULL,
    organisation_id integer,
    member_id integer,
    blast_email_id integer,
    email character varying(255),
    unsubscribe_object boolean,
    unsubscribe_organisation boolean,
    unsubscribable_id integer,
    unsubscribable_type character varying(255),
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    external_id character varying(255),
    externally_unsubscribed_at timestamp without time zone
);

CREATE TABLE users (
    id integer NOT NULL,
    email character varying(255) DEFAULT ''::character varying NOT NULL,
    encrypted_password character varying(255) DEFAULT ''::character varying NOT NULL,
    reset_password_sent_at timestamp without time zone,
    remember_created_at timestamp without time zone,
    sign_in_count integer DEFAULT 0,
    current_sign_in_at timestamp without time zone,
    last_sign_in_at timestamp without time zone,
    current_sign_in_ip character varying(255),
    last_sign_in_ip character varying(255),
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    first_name character varying(255),
    last_name character varying(255),
    admin boolean,
    phone_number character varying(255),
    postcode character varying(255),
    join_organisation boolean,
    organisation_id integer NOT NULL,
    confirmed_at timestamp without time zone,
    confirmation_sent_at timestamp without time zone,
    opt_out_site_email boolean,
    facebook_id character varying(255),
    external_constituent_id character varying(255),
    member_id integer,
    additional_fields text,
    cached_organisation_slug character varying(255),
    image_file_name character varying(255),
    image_content_type character varying(255),
    image_file_size integer,
    image_updated_at timestamp without time zone,
    locale character varying(5) DEFAULT 'en'::character varying,
    new_member boolean,
    failed_attempts integer DEFAULT 0,
    locked_at timestamp without time zone,
    country character varying(3),
    authy_id character varying(255),
    last_sign_in_with_authy timestamp without time zone,
    authy_enabled boolean DEFAULT false
);